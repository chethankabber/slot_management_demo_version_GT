{"ast":null,"code":"var _jsxFileName = \"E:\\\\Gandeevan_Technologies_project\\\\Gandeevan-technologies-slot-frontend\\\\src\\\\components\\\\admin\\\\dashboard\\\\AdminDashboard.jsx\",\n  _s = $RefreshSig$();\n// src/pages/dashboard/AdminDashboard.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../../../api/axios\";\nimport ContainerSummaryCard from \"./ContainerSummaryCard\";\nimport PermissionRequests from \"./PermissionRequests\";\nimport ItemDueCard from \"./DueDatesCard\";\nimport LowStockCard from \"./LowStockCard\";\nimport NotificationToast from \"../../common/NotificationToast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = () => {\n  _s();\n  const navigate = useNavigate();\n  const [containers, setContainers] = useState([]);\n  const [permissionRequests, setPermissionRequests] = useState([]);\n  const [lowStock, setLowStock] = useState([]);\n  const [toast, setToast] = useState({\n    show: false,\n    message: \"\",\n    bg: \"success\"\n  });\n\n  /* Load Dashboard Data */\n  const loadData = async () => {\n    try {\n      const [conRes, reqRes, lowRes] = await Promise.all([api.get(\"/racks/getAllRacks\"), api.get(\"/requests/AllRequests\"), api.get(\"/manager/limitedStock\")]);\n      setContainers(conRes.data.data || []);\n      setPermissionRequests(reqRes.data.data || []);\n      setLowStock(lowRes.data.data || []);\n    } catch (err) {\n      console.error(\"AdminDashboard Load Error:\", err);\n    }\n  };\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  /* Approve Request */\n  /* Approve Request */\n  const onApprove = async id => {\n    console.log(\"onApprove called with id:\", id);\n    try {\n      const res = await api.put(`/requests/approve/${id}`);\n      console.log(\"Approve API success:\", res.data);\n      setToast({\n        show: true,\n        message: \"Request Approved Successfully! üëç\",\n        bg: \"success\"\n      });\n      loadData();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Approve API error:\", err.response || err);\n      setToast({\n        show: true,\n        message: (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to approve request\",\n        bg: \"danger\"\n      });\n    }\n  };\n\n  /* Reject Request */\n  const onReject = async id => {\n    try {\n      await api.put(`/requests/reject/${id}`);\n      setToast({\n        show: true,\n        message: \"Request Rejected ‚ùå\",\n        bg: \"danger\"\n      });\n      loadData();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container my-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"fw-bold mb-1\",\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"Overview of your container management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: permissionRequests.length ? /*#__PURE__*/_jsxDEV(PermissionRequests, {\n        permissionRequests: permissionRequests,\n        onApprove: onApprove,\n        onReject: onReject\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: \"No pending requests\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row g-4 mb-4\",\n      children: containers.map(container => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-sm-6 col-lg-4\",\n        children: /*#__PURE__*/_jsxDEV(ContainerSummaryCard, {\n          container: container,\n          basePath: \"/admin/racks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)\n      }, container._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row g-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-6\",\n        children: /*#__PURE__*/_jsxDEV(ItemDueCard, {\n          containers: containers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-6\",\n        children: /*#__PURE__*/_jsxDEV(LowStockCard, {\n          lowStock: lowStock,\n          onJumpToSlot: (rackId, slot) => navigate(`/admin/racks?jumpRack=${rackId}&jumpSlot=${slot}`)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NotificationToast, {\n      show: toast.show,\n      onClose: () => setToast({\n        ...toast,\n        show: false\n      }),\n      message: toast.message,\n      bg: toast.bg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDashboard, \"OfV0QUdHJ9OohT7AiI20lgW0P9U=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","api","ContainerSummaryCard","PermissionRequests","ItemDueCard","LowStockCard","NotificationToast","jsxDEV","_jsxDEV","AdminDashboard","_s","navigate","containers","setContainers","permissionRequests","setPermissionRequests","lowStock","setLowStock","toast","setToast","show","message","bg","loadData","conRes","reqRes","lowRes","Promise","all","get","data","err","console","error","onApprove","id","log","res","put","_err$response","_err$response$data","response","onReject","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","container","basePath","_id","onJumpToSlot","rackId","slot","onClose","_c","$RefreshReg$"],"sources":["E:/Gandeevan_Technologies_project/Gandeevan-technologies-slot-frontend/src/components/admin/dashboard/AdminDashboard.jsx"],"sourcesContent":["// src/pages/dashboard/AdminDashboard.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../../../api/axios\";\r\nimport ContainerSummaryCard from \"./ContainerSummaryCard\";\r\nimport PermissionRequests from \"./PermissionRequests\";\r\nimport ItemDueCard from \"./DueDatesCard\";\r\nimport LowStockCard from \"./LowStockCard\";\r\nimport NotificationToast from \"../../common/NotificationToast\";\r\n\r\nconst AdminDashboard = () => {\r\n  const navigate = useNavigate();\r\n  const [containers, setContainers] = useState([]);\r\n  const [permissionRequests, setPermissionRequests] = useState([]);\r\n  const [lowStock, setLowStock] = useState([]);\r\n  const [toast, setToast] = useState({\r\n    show: false,\r\n    message: \"\",\r\n    bg: \"success\",\r\n  });\r\n\r\n  /* Load Dashboard Data */\r\n  const loadData = async () => {\r\n    try {\r\n      const [conRes, reqRes, lowRes] = await Promise.all([\r\n        api.get(\"/racks/getAllRacks\"),\r\n        api.get(\"/requests/AllRequests\"),\r\n        api.get(\"/manager/limitedStock\"),\r\n      ]);\r\n\r\n      setContainers(conRes.data.data || []);\r\n      setPermissionRequests(reqRes.data.data || []);\r\n      setLowStock(lowRes.data.data || []);\r\n    } catch (err) {\r\n      console.error(\"AdminDashboard Load Error:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  /* Approve Request */\r\n   /* Approve Request */\r\nconst onApprove = async (id) => {\r\n  console.log(\"onApprove called with id:\", id);\r\n  try {\r\n    const res = await api.put(`/requests/approve/${id}`);\r\n    console.log(\"Approve API success:\", res.data);\r\n\r\n    setToast({\r\n      show: true,\r\n      message: \"Request Approved Successfully! üëç\",\r\n      bg: \"success\",\r\n    });\r\n    loadData();\r\n  } catch (err) {\r\n    console.error(\"Approve API error:\", err.response || err);\r\n    setToast({\r\n      show: true,\r\n      message: err?.response?.data?.message || \"Failed to approve request\",\r\n      bg: \"danger\",\r\n    });\r\n  }\r\n };\r\n\r\n  /* Reject Request */\r\n  const onReject = async (id) => {\r\n    try {\r\n      await api.put(`/requests/reject/${id}`);\r\n      setToast({\r\n        show: true,\r\n        message: \"Request Rejected ‚ùå\",\r\n        bg: \"danger\",\r\n      });\r\n      loadData();\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container my-4\">\r\n      <h2 className=\"fw-bold mb-1\">Admin Dashboard</h2>\r\n      <p className=\"text-muted\">Overview of your container management</p>\r\n\r\n      {/* Pending Permission Requests */}\r\n      <div className=\"mb-4\">\r\n        {permissionRequests.length ? (\r\n          <PermissionRequests\r\n            permissionRequests={permissionRequests}\r\n            onApprove={onApprove}\r\n            onReject={onReject}\r\n          />\r\n        ) : (\r\n          <p className=\"text-muted\">No pending requests</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Container Summary */}\r\n      <div className=\"row g-4 mb-4\">\r\n        {containers.map((container) => (\r\n          <div key={container._id} className=\"col-12 col-sm-6 col-lg-4\">\r\n            <ContainerSummaryCard\r\n              container={container}\r\n              basePath=\"/admin/racks\"\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Low Stock + Due Dates Cards */}\r\n      <div className=\"row g-4\">\r\n        <div className=\"col-lg-6\">\r\n          <ItemDueCard containers={containers} />\r\n        </div>\r\n\r\n        <div className=\"col-lg-6\">\r\n          <LowStockCard\r\n            lowStock={lowStock}\r\n            onJumpToSlot={(rackId, slot) =>\r\n              navigate(`/admin/racks?jumpRack=${rackId}&jumpSlot=${slot}`)\r\n            }\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Toast Notification */}\r\n      <NotificationToast\r\n        show={toast.show}\r\n        onClose={() => setToast({ ...toast, show: false })}\r\n        message={toast.message}\r\n        bg={toast.bg}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}