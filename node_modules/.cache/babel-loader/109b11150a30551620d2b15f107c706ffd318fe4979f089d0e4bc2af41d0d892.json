{"ast":null,"code":"// // src/pages/users/RequestItemModal.jsx\n// import React, { useState, useEffect } from \"react\";\n// import { Modal, Button, Form } from \"react-bootstrap\";\n// import api from \"../../api/axios\";\n\n// const RequestItemModal = ({ show, onClose, onSubmit }) => {\n//   const [form, setForm] = useState({\n//     itemName: \"\",\n//     quantity: 1,\n//     projectName: \"\",\n//     returnable: false,\n//     returnDate: \"\",\n//     message: \"\",\n//   });\n\n//   const [error, setError] = useState(\"\");\n\n//   // ðŸ”¥ NEW: suggestions state\n//   const [suggestions, setSuggestions] = useState([]);\n//   const [loading, setLoading] = useState(false);\n\n//   useEffect(() => {\n//     if (!show) {\n//       setForm({\n//         itemName: \"\",\n//         quantity: 1,\n//         projectName: \"\",\n//         returnable: false,\n//         returnDate: \"\",\n//         message: \"\",\n//       });\n//       setSuggestions([]);\n//       setError(\"\");\n//     }\n//   }, [show]);\n\n//   // ðŸ”¥ NEW: Fetch suggestions from backend\n//   const fetchSuggestions = async (value) => {\n//     if (!value) {\n//       setSuggestions([]);\n//       return;\n//     }\n\n//     setLoading(true);\n//     try {\n//       const res = await api.get(`/users/suggest-items?search=${value}`);\n//       setSuggestions(res.data.data || []);\n//     } catch (err) {\n//       console.error(\"Suggestion Error:\", err);\n//     }\n//     setLoading(false);\n//   };\n\n//   const handleSubmit = (e) => {\n//     e.preventDefault();\n\n//     if (!form.itemName || !form.projectName || !form.quantity) {\n//       setError(\"âš  Please fill all mandatory fields\");\n//       return;\n//     }\n//     if (form.returnable && !form.returnDate) {\n//       setError(\"âš  Please select a return date for returnable item\");\n//       return;\n//     }\n\n//     const requestData = {\n//       itemName: form.itemName,\n//       quantity: Number(form.quantity),\n//       project: form.projectName,\n//       isReturnable: form.returnable,\n//       returnDate: form.returnable ? form.returnDate : null,\n//       message: form.message,\n//     };\n\n//     onSubmit(requestData);\n//   };\n\n//   return (\n//     <Modal show={show} onHide={onClose} centered>\n//       <Modal.Header closeButton style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}>\n//         <Modal.Title>Request New Item</Modal.Title>\n//       </Modal.Header>\n\n//       <Modal.Body style={{ background: \"hsl(215,25%,14%)\", color: \"white\" }}>\n//         <Form onSubmit={handleSubmit}>\n\n//           {error && (\n//             <div className=\"alert alert-danger py-1\">\n//               {error}\n//             </div>\n//           )}\n\n//           {/* ======================== */}\n//           {/* ITEM NAME WITH AUTOCOMPLETE */}\n//           {/* ======================== */}\n//           <Form.Group className=\"mb-2\" style={{ position: \"relative\" }}>\n//             <Form.Label>Item Name *</Form.Label>\n\n//             <Form.Control\n//               placeholder=\"Enter item name\"\n//               value={form.itemName}\n//               onChange={(e) => {\n//                 const value = e.target.value;\n//                 setForm({ ...form, itemName: value });\n//                 fetchSuggestions(value);\n//               }}\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\n//             />\n\n//             {/* Suggestion dropdown */}\n//             {suggestions.length > 0 && (\n//               <div\n//                 style={{\n//                   background: \"hsl(215,25%,16%)\",\n//                   borderRadius: 5,\n//                   position: \"absolute\",\n//                   width: \"100%\",\n//                   zIndex: 9999,\n//                   border: \"1px solid #333\",\n//                   maxHeight: \"150px\",\n//                   overflowY: \"auto\",\n//                 }}\n//               >\n//                {suggestions.map((item, idx) => (\n//                 <div\n//                     key={idx}\n//                     onClick={() => {\n//                          setForm({ ...form, itemName: item.itemName });\n//                          setSuggestions([]);\n//                     }}\n//                     style={{\n//                         padding: \"6px 10px\",\n//                         cursor: \"pointer\",\n//                         borderBottom: \"1px solid #333\",\n//                     }}\n//                   >\n//                    {item.itemName} \n//                    <span style={{ color: \"#aaa\" }}>\n//                      {\" \"}({item.remaining} available)\n//                    </span>\n//                 </div>\n//                 ))}\n//               </div>\n//             )}\n//           </Form.Group>\n\n//           <Form.Group className=\"mb-2\">\n//             <Form.Label>Quantity *</Form.Label>\n//             <Form.Control\n//               type=\"number\"\n//               min={1}\n//               placeholder=\"Enter quantity\"\n//               value={form.quantity}\n//               onChange={(e) => setForm({ ...form, quantity: e.target.value })}\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\n//             />\n//           </Form.Group>\n\n//           <Form.Group className=\"mb-2\">\n//             <Form.Label>Project *</Form.Label>\n//             <Form.Control\n//               placeholder=\"Enter project name\"\n//               value={form.projectName}\n//               onChange={(e) => setForm({ ...form, projectName: e.target.value })}\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\n//             />\n//           </Form.Group>\n\n//           <div className=\"d-flex align-items-center mb-2\">\n//             <Form.Check\n//               type=\"checkbox\"\n//               label=\"Returnable?\"\n//               checked={form.returnable}\n//               onChange={(e) => setForm({ ...form, returnable: e.target.checked })}\n//             />\n\n//             {form.returnable && (\n//               <input\n//                 type=\"date\"\n//                 className=\"form-control ms-2\"\n//                 value={form.returnDate}\n//                 onChange={(e) => setForm({ ...form, returnDate: e.target.value })}\n//                 style={{ maxWidth: 200, background: \"hsl(215,25%,12%)\", color: \"white\" }}\n//               />\n//             )}\n//           </div>\n\n//           <Form.Group className=\"mb-3\">\n//             <Form.Label>Message (Optional)</Form.Label>\n//             <Form.Control\n//               as=\"textarea\"\n//               rows={2}\n//               placeholder=\"Enter message if any\"\n//               value={form.message}\n//               onChange={(e) => setForm({ ...form, message: e.target.value })}\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\n//             />\n//           </Form.Group>\n\n//           <div className=\"d-flex justify-content-end\">\n//             <Button variant=\"secondary\" onClick={onClose}>\n//               Close\n//             </Button>\n//             <Button className=\"ms-2\" variant=\"primary\" type=\"submit\">\n//               Submit\n//             </Button>\n//           </div>\n\n//         </Form>\n//       </Modal.Body>\n//     </Modal>\n//   );\n// };\n\n// export default RequestItemModal;","map":{"version":3,"names":[],"sources":["E:/Gandeevan_Technologies_project/Gandeevan-technologies-slot-frontend/src/pages/users/RequestItemModal.jsx"],"sourcesContent":["// // src/pages/users/RequestItemModal.jsx\r\n// import React, { useState, useEffect } from \"react\";\r\n// import { Modal, Button, Form } from \"react-bootstrap\";\r\n// import api from \"../../api/axios\";\r\n\r\n// const RequestItemModal = ({ show, onClose, onSubmit }) => {\r\n//   const [form, setForm] = useState({\r\n//     itemName: \"\",\r\n//     quantity: 1,\r\n//     projectName: \"\",\r\n//     returnable: false,\r\n//     returnDate: \"\",\r\n//     message: \"\",\r\n//   });\r\n\r\n//   const [error, setError] = useState(\"\");\r\n\r\n//   // ðŸ”¥ NEW: suggestions state\r\n//   const [suggestions, setSuggestions] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     if (!show) {\r\n//       setForm({\r\n//         itemName: \"\",\r\n//         quantity: 1,\r\n//         projectName: \"\",\r\n//         returnable: false,\r\n//         returnDate: \"\",\r\n//         message: \"\",\r\n//       });\r\n//       setSuggestions([]);\r\n//       setError(\"\");\r\n//     }\r\n//   }, [show]);\r\n\r\n//   // ðŸ”¥ NEW: Fetch suggestions from backend\r\n//   const fetchSuggestions = async (value) => {\r\n//     if (!value) {\r\n//       setSuggestions([]);\r\n//       return;\r\n//     }\r\n\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await api.get(`/users/suggest-items?search=${value}`);\r\n//       setSuggestions(res.data.data || []);\r\n//     } catch (err) {\r\n//       console.error(\"Suggestion Error:\", err);\r\n//     }\r\n//     setLoading(false);\r\n//   };\r\n\r\n//   const handleSubmit = (e) => {\r\n//     e.preventDefault();\r\n\r\n//     if (!form.itemName || !form.projectName || !form.quantity) {\r\n//       setError(\"âš  Please fill all mandatory fields\");\r\n//       return;\r\n//     }\r\n//     if (form.returnable && !form.returnDate) {\r\n//       setError(\"âš  Please select a return date for returnable item\");\r\n//       return;\r\n//     }\r\n\r\n//     const requestData = {\r\n//       itemName: form.itemName,\r\n//       quantity: Number(form.quantity),\r\n//       project: form.projectName,\r\n//       isReturnable: form.returnable,\r\n//       returnDate: form.returnable ? form.returnDate : null,\r\n//       message: form.message,\r\n//     };\r\n\r\n//     onSubmit(requestData);\r\n//   };\r\n\r\n//   return (\r\n//     <Modal show={show} onHide={onClose} centered>\r\n//       <Modal.Header closeButton style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}>\r\n//         <Modal.Title>Request New Item</Modal.Title>\r\n//       </Modal.Header>\r\n\r\n//       <Modal.Body style={{ background: \"hsl(215,25%,14%)\", color: \"white\" }}>\r\n//         <Form onSubmit={handleSubmit}>\r\n          \r\n//           {error && (\r\n//             <div className=\"alert alert-danger py-1\">\r\n//               {error}\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* ======================== */}\r\n//           {/* ITEM NAME WITH AUTOCOMPLETE */}\r\n//           {/* ======================== */}\r\n//           <Form.Group className=\"mb-2\" style={{ position: \"relative\" }}>\r\n//             <Form.Label>Item Name *</Form.Label>\r\n\r\n//             <Form.Control\r\n//               placeholder=\"Enter item name\"\r\n//               value={form.itemName}\r\n//               onChange={(e) => {\r\n//                 const value = e.target.value;\r\n//                 setForm({ ...form, itemName: value });\r\n//                 fetchSuggestions(value);\r\n//               }}\r\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\r\n//             />\r\n\r\n//             {/* Suggestion dropdown */}\r\n//             {suggestions.length > 0 && (\r\n//               <div\r\n//                 style={{\r\n//                   background: \"hsl(215,25%,16%)\",\r\n//                   borderRadius: 5,\r\n//                   position: \"absolute\",\r\n//                   width: \"100%\",\r\n//                   zIndex: 9999,\r\n//                   border: \"1px solid #333\",\r\n//                   maxHeight: \"150px\",\r\n//                   overflowY: \"auto\",\r\n//                 }}\r\n//               >\r\n//                {suggestions.map((item, idx) => (\r\n//                 <div\r\n//                     key={idx}\r\n//                     onClick={() => {\r\n//                          setForm({ ...form, itemName: item.itemName });\r\n//                          setSuggestions([]);\r\n//                     }}\r\n//                     style={{\r\n//                         padding: \"6px 10px\",\r\n//                         cursor: \"pointer\",\r\n//                         borderBottom: \"1px solid #333\",\r\n//                     }}\r\n//                   >\r\n//                    {item.itemName} \r\n//                    <span style={{ color: \"#aaa\" }}>\r\n//                      {\" \"}({item.remaining} available)\r\n//                    </span>\r\n//                 </div>\r\n//                 ))}\r\n//               </div>\r\n//             )}\r\n//           </Form.Group>\r\n\r\n//           <Form.Group className=\"mb-2\">\r\n//             <Form.Label>Quantity *</Form.Label>\r\n//             <Form.Control\r\n//               type=\"number\"\r\n//               min={1}\r\n//               placeholder=\"Enter quantity\"\r\n//               value={form.quantity}\r\n//               onChange={(e) => setForm({ ...form, quantity: e.target.value })}\r\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\r\n//             />\r\n//           </Form.Group>\r\n\r\n//           <Form.Group className=\"mb-2\">\r\n//             <Form.Label>Project *</Form.Label>\r\n//             <Form.Control\r\n//               placeholder=\"Enter project name\"\r\n//               value={form.projectName}\r\n//               onChange={(e) => setForm({ ...form, projectName: e.target.value })}\r\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\r\n//             />\r\n//           </Form.Group>\r\n\r\n//           <div className=\"d-flex align-items-center mb-2\">\r\n//             <Form.Check\r\n//               type=\"checkbox\"\r\n//               label=\"Returnable?\"\r\n//               checked={form.returnable}\r\n//               onChange={(e) => setForm({ ...form, returnable: e.target.checked })}\r\n//             />\r\n\r\n//             {form.returnable && (\r\n//               <input\r\n//                 type=\"date\"\r\n//                 className=\"form-control ms-2\"\r\n//                 value={form.returnDate}\r\n//                 onChange={(e) => setForm({ ...form, returnDate: e.target.value })}\r\n//                 style={{ maxWidth: 200, background: \"hsl(215,25%,12%)\", color: \"white\" }}\r\n//               />\r\n//             )}\r\n//           </div>\r\n\r\n//           <Form.Group className=\"mb-3\">\r\n//             <Form.Label>Message (Optional)</Form.Label>\r\n//             <Form.Control\r\n//               as=\"textarea\"\r\n//               rows={2}\r\n//               placeholder=\"Enter message if any\"\r\n//               value={form.message}\r\n//               onChange={(e) => setForm({ ...form, message: e.target.value })}\r\n//               style={{ background: \"hsl(215,25%,12%)\", color: \"white\" }}\r\n//             />\r\n//           </Form.Group>\r\n\r\n//           <div className=\"d-flex justify-content-end\">\r\n//             <Button variant=\"secondary\" onClick={onClose}>\r\n//               Close\r\n//             </Button>\r\n//             <Button className=\"ms-2\" variant=\"primary\" type=\"submit\">\r\n//               Submit\r\n//             </Button>\r\n//           </div>\r\n\r\n//         </Form>\r\n//       </Modal.Body>\r\n//     </Modal>\r\n//   );\r\n// };\r\n\r\n// export default RequestItemModal;\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}