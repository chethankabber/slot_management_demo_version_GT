{"ast":null,"code":"var _jsxFileName = \"E:\\\\Gandeevan_Technologies_project\\\\Gandeevan-technologies-slot-frontend\\\\src\\\\components\\\\admin\\\\racks\\\\SlotDetailModal.jsx\",\n  _s = $RefreshSig$();\n// Slot Detail + Add Item + Edit Item + Return Item\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport { Trash2 } from \"lucide-react\";\nimport api from \"../../../api/axios\";\nimport NotificationToast from \"../../common/NotificationToast\";\nimport AddItemModal from \"./AddItemModal\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SlotDetailModal = ({\n  show,\n  onClose,\n  slot,\n  containerId,\n  onAddItem,\n  refresh\n}) => {\n  _s();\n  // MODALS\n  const [showAddItemModal, setShowAddItemModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showReturnModal, setShowReturnModal] = useState(false);\n\n  // DATA\n  const [editItem, setEditItem] = useState(null);\n  const [deleteItem, setDeleteItem] = useState(null);\n  const [returnContext, setReturnContext] = useState(null);\n  const [returnQty, setReturnQty] = useState(1);\n  const [selectedBorrower, setSelectedBorrower] = useState(\"\");\n\n  // TOAST\n  const [toast, setToast] = useState({\n    show: false,\n    message: \"\",\n    bg: \"success\"\n  });\n  useEffect(() => {\n    if (!show) {\n      setShowAddItemModal(false);\n      setShowEditModal(false);\n      setShowDeleteModal(false);\n      setShowReturnModal(false);\n      setEditItem(null);\n      setDeleteItem(null);\n      setReturnContext(null);\n      setReturnQty(1);\n      setSelectedBorrower(\"\");\n    }\n  }, [show]);\n  if (!slot) return null;\n\n  // ITEMS\n  const items = Array.isArray(slot.items) ? slot.items : [];\n  const remainingQty = it => {\n    var _ref, _ref2, _it$remaining;\n    return Number((_ref = (_ref2 = (_it$remaining = it.remaining) !== null && _it$remaining !== void 0 ? _it$remaining : it.quantity) !== null && _ref2 !== void 0 ? _ref2 : it.total) !== null && _ref !== void 0 ? _ref : 0);\n  };\n  const totalQty = it => {\n    var _ref3, _it$quantity;\n    return Number((_ref3 = (_it$quantity = it.quantity) !== null && _it$quantity !== void 0 ? _it$quantity : it.total) !== null && _ref3 !== void 0 ? _ref3 : remainingQty(it));\n  };\n\n  // ================= ADD ITEM =================\n  const handleAddItemSubmit = itemData => {\n    console.log(\"ðŸŸ¢ PAYLOAD BEFORE onAddItem:\", payload);\n    if (!(slot !== null && slot !== void 0 && slot.slotId)) return;\n\n    // ðŸ” Map frontend fields â†’ backend fields\n    const payload = {\n      itemName: itemData.name,\n      total: Number(itemData.quantity),\n      remaining: Number(itemData.quantity),\n      itemCategory: itemData.itemCategory,\n      componentType: itemData.componentType,\n      package: itemData.package,\n      partNumber: itemData.partNumber,\n      manufacturer: itemData.manufacturer,\n      value: itemData.value,\n      tolerance: itemData.tolerance,\n      voltageRating: itemData.voltageRating,\n      currentRating: itemData.currentRating,\n      displayType: itemData.displayType,\n      displayInterface: itemData.displayInterface,\n      displayColor: itemData.displayColor,\n      protectionType: itemData.protectionType,\n      protectionLocation: itemData.protectionLocation,\n      moduleType: itemData.moduleType\n    };\n    console.log(\"ðŸŸ¢ ADD ITEM PAYLOAD:\", payload);\n    onAddItem(containerId, slot.slotId, payload);\n    refresh();\n    setShowAddItemModal(false);\n    onClose();\n    setToast({\n      show: true,\n      message: \"Item added successfully!\",\n      bg: \"success\"\n    });\n  };\n\n  // ================= EDIT ITEM =================\n  const openEditModal = item => {\n    setEditItem({\n      ...item,\n      itemId: item.itemId,\n      name: item.itemName,\n      quantity: totalQty(item),\n      itemCategory: item.itemCategory,\n      // âœ… Make sure this is included\n      componentType: item.componentType,\n      package: item.package,\n      partNumber: item.partNumber,\n      manufacturer: item.manufacturer,\n      value: item.value,\n      tolerance: item.tolerance,\n      voltageRating: item.voltageRating,\n      currentRating: item.currentRating,\n      displayType: item.displayType,\n      displayInterface: item.displayInterface,\n      displayColor: item.displayColor,\n      protectionType: item.protectionType,\n      protectionLocation: item.protectionLocation,\n      moduleType: item.moduleType\n    });\n    setShowEditModal(true);\n  };\n\n  // âœ… CORRECT - Update handleEditSave to accept itemData\n  const handleEditSave = async itemData => {\n    if (!editItem) return;\n    try {\n      await api.put(`/racks/updateItem/${containerId}/${slot.slotId}/${editItem.itemId}`, {\n        itemName: itemData.name,\n        // Use itemData from modal\n        total: itemData.quantity,\n        // Use itemData from modal\n\n        itemCategory: itemData.itemCategory,\n        componentType: itemData.componentType,\n        package: itemData.package,\n        partNumber: itemData.partNumber,\n        manufacturer: itemData.manufacturer,\n        value: itemData.value,\n        tolerance: itemData.tolerance,\n        voltageRating: itemData.voltageRating,\n        currentRating: itemData.currentRating,\n        displayType: itemData.displayType,\n        displayInterface: itemData.displayInterface,\n        displayColor: itemData.displayColor,\n        protectionType: itemData.protectionType,\n        protectionLocation: itemData.protectionLocation,\n        moduleType: itemData.moduleType\n      });\n      setToast({\n        show: true,\n        message: \"Item updated successfully\",\n        bg: \"success\"\n      });\n      setShowEditModal(false);\n      setEditItem(null);\n      refresh();\n      onClose();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setToast({\n        show: true,\n        message: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Update failed\",\n        bg: \"danger\"\n      });\n    }\n  };\n\n  // ================= DELETE ITEM =================\n  const openDeleteModal = item => {\n    setDeleteItem(item);\n    setShowDeleteModal(true);\n  };\n  const handleDeleteItem = async () => {\n    if (!deleteItem) return;\n    try {\n      await api.delete(`/racks/deleteItem/${containerId}/${slot.slotId}/${deleteItem.itemId}`);\n      setToast({\n        show: true,\n        message: \"Item deleted successfully\",\n        bg: \"success\"\n      });\n      setShowDeleteModal(false);\n      setDeleteItem(null);\n      refresh();\n      onClose();\n    } catch {\n      setToast({\n        show: true,\n        message: \"Failed to delete item\",\n        bg: \"danger\"\n      });\n    }\n  };\n\n  // ================= RETURN ITEM =================\n  const openReturnModal = item => {\n    var _item$takenHistory;\n    if (!((_item$takenHistory = item.takenHistory) !== null && _item$takenHistory !== void 0 && _item$takenHistory.length)) {\n      setToast({\n        show: true,\n        message: \"No borrow history found\",\n        bg: \"warning\"\n      });\n      return;\n    }\n    setReturnContext({\n      item,\n      historyList: item.takenHistory\n    });\n    setShowReturnModal(true);\n  };\n  const confirmReturn = async () => {\n    const borrower = returnContext === null || returnContext === void 0 ? void 0 : returnContext.historyList.find(h => h.borrowId === selectedBorrower);\n    if (!borrower) {\n      setToast({\n        show: true,\n        message: \"Select borrower\",\n        bg: \"warning\"\n      });\n      return;\n    }\n    if (returnQty < 1 || returnQty > borrower.quantity) {\n      setToast({\n        show: true,\n        message: \"Invalid quantity\",\n        bg: \"danger\"\n      });\n      return;\n    }\n    try {\n      await api.post(`/manager/returnItem/${borrower.borrowId}`, {\n        rackId: slot.rackId,\n        rackName: slot.rackName,\n        slotNumber: slot.slotNumber,\n        returnQuantity: returnQty\n      });\n      setToast({\n        show: true,\n        message: \"Item returned successfully\",\n        bg: \"success\"\n      });\n      refresh();\n      setShowReturnModal(false);\n      setReturnContext(null);\n      setReturnQty(1);\n      setSelectedBorrower(\"\");\n      onClose();\n    } catch {\n      setToast({\n        show: true,\n        message: \"Return failed\",\n        bg: \"danger\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NotificationToast, {\n      show: toast.show,\n      message: toast.message,\n      bg: toast.bg,\n      onClose: () => setToast(p => ({\n        ...p,\n        show: false\n      }))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: onClose,\n      centered: true,\n      size: \"lg\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [\"Slot \", slot.slotNumber, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-muted\",\n            children: \"-Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        style: {\n          background: \"#0f172a\",\n          color: \"white\"\n        },\n        children: [items.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted\",\n          children: \"This slot is empty.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this), items.map(it => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 mb-3 rounded\",\n          style: {\n            background: \"#111827\",\n            border: \"1px solid #1f2933\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: it.itemName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"small text-muted\",\n                children: [\"Total: \", totalQty(it), \" | Remaining: \", remainingQty(it), it.itemCategory && ` | ${it.itemCategory}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                onClick: () => openEditModal(it),\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"danger\",\n                onClick: () => openDeleteModal(it),\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this), remainingQty(it) < totalQty(it) && /*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"warning\",\n                onClick: () => openReturnModal(it),\n                children: \"Return\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this)\n        }, it.itemId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShowAddItemModal(true),\n          children: \"+ Add Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddItemModal, {\n      show: showAddItemModal,\n      onClose: () => setShowAddItemModal(false),\n      onSubmit: handleAddItemSubmit,\n      slotNumber: slot.slotNumber,\n      mode: \"add\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddItemModal, {\n      show: showEditModal,\n      onClose: () => setShowEditModal(false),\n      onSubmit: handleEditSave,\n      slotNumber: slot.slotNumber,\n      mode: \"edit\",\n      initialData: editItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showDeleteModal,\n      onHide: () => setShowDeleteModal(false),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Delete Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [\"Delete \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: deleteItem === null || deleteItem === void 0 ? void 0 : deleteItem.itemName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 18\n        }, this), \"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowDeleteModal(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: handleDeleteItem,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showReturnModal,\n      onHide: () => setShowReturnModal(false),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Return Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: returnContext && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Select, {\n            className: \"mb-3\",\n            value: selectedBorrower,\n            onChange: e => setSelectedBorrower(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select borrower\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this), returnContext.historyList.map(h => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: h.borrowId,\n              children: [h.userName, \" (\", h.quantity, \")\"]\n            }, h.borrowId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"number\",\n            min: \"1\",\n            value: returnQty,\n            onChange: e => setReturnQty(Number(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowReturnModal(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"success\",\n          onClick: confirmReturn,\n          children: \"Confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(SlotDetailModal, \"bD8rVk9T7TET45QgoFsJjq3DrV0=\");\n_c = SlotDetailModal;\nexport default SlotDetailModal;\nvar _c;\n$RefreshReg$(_c, \"SlotDetailModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Form","Trash2","api","NotificationToast","AddItemModal","jsxDEV","_jsxDEV","Fragment","_Fragment","SlotDetailModal","show","onClose","slot","containerId","onAddItem","refresh","_s","showAddItemModal","setShowAddItemModal","showEditModal","setShowEditModal","showDeleteModal","setShowDeleteModal","showReturnModal","setShowReturnModal","editItem","setEditItem","deleteItem","setDeleteItem","returnContext","setReturnContext","returnQty","setReturnQty","selectedBorrower","setSelectedBorrower","toast","setToast","message","bg","items","Array","isArray","remainingQty","it","_ref","_ref2","_it$remaining","Number","remaining","quantity","total","totalQty","_ref3","_it$quantity","handleAddItemSubmit","itemData","console","log","payload","slotId","itemName","name","itemCategory","componentType","package","partNumber","manufacturer","value","tolerance","voltageRating","currentRating","displayType","displayInterface","displayColor","protectionType","protectionLocation","moduleType","openEditModal","item","itemId","handleEditSave","put","err","_err$response","_err$response$data","response","data","openDeleteModal","handleDeleteItem","delete","openReturnModal","_item$takenHistory","takenHistory","length","historyList","confirmReturn","borrower","find","h","borrowId","post","rackId","rackName","slotNumber","returnQuantity","children","p","fileName","_jsxFileName","lineNumber","columnNumber","onHide","centered","size","Header","closeButton","Title","className","Body","style","background","color","map","border","onClick","variant","Footer","onSubmit","mode","initialData","Select","onChange","e","target","userName","Control","type","min","_c","$RefreshReg$"],"sources":["E:/Gandeevan_Technologies_project/Gandeevan-technologies-slot-frontend/src/components/admin/racks/SlotDetailModal.jsx"],"sourcesContent":["// Slot Detail + Add Item + Edit Item + Return Item\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Modal, Button, Form } from \"react-bootstrap\";\r\nimport { Trash2 } from \"lucide-react\";\r\nimport api from \"../../../api/axios\";\r\nimport NotificationToast from \"../../common/NotificationToast\";\r\n\r\nimport AddItemModal from \"./AddItemModal\";\r\n\r\n\r\nconst SlotDetailModal = ({\r\n  show,\r\n  onClose,\r\n  slot,\r\n  containerId,\r\n  onAddItem,\r\n  refresh,\r\n}) => {\r\n  // MODALS\r\n  const [showAddItemModal, setShowAddItemModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [showReturnModal, setShowReturnModal] = useState(false);\r\n\r\n  // DATA\r\n  const [editItem, setEditItem] = useState(null);\r\n  const [deleteItem, setDeleteItem] = useState(null);\r\n  const [returnContext, setReturnContext] = useState(null);\r\n  const [returnQty, setReturnQty] = useState(1);\r\n  const [selectedBorrower, setSelectedBorrower] = useState(\"\");\r\n\r\n  // TOAST\r\n  const [toast, setToast] = useState({\r\n    show: false,\r\n    message: \"\",\r\n    bg: \"success\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!show) {\r\n      setShowAddItemModal(false);\r\n      setShowEditModal(false);\r\n      setShowDeleteModal(false);\r\n      setShowReturnModal(false);\r\n      setEditItem(null);\r\n      setDeleteItem(null);\r\n      setReturnContext(null);\r\n      setReturnQty(1);\r\n      setSelectedBorrower(\"\");\r\n    }\r\n  }, [show]);\r\n\r\n  if (!slot) return null;\r\n\r\n  // ITEMS\r\n  const items = Array.isArray(slot.items) ? slot.items : [];\r\n\r\n  const remainingQty = (it) =>\r\n    Number(\r\n      it.remaining ?? it.quantity ?? it.total ?? 0\r\n    );\r\n\r\n  const totalQty = (it) =>\r\n    Number(it.quantity ?? it.total ?? remainingQty(it));\r\n\r\n  // ================= ADD ITEM =================\r\n  const handleAddItemSubmit = (itemData) => {\r\n    console.log(\"ðŸŸ¢ PAYLOAD BEFORE onAddItem:\", payload);\r\n\r\n  if (!slot?.slotId) return;\r\n\r\n  // ðŸ” Map frontend fields â†’ backend fields\r\n  const payload = {\r\n    itemName: itemData.name,\r\n    total: Number(itemData.quantity),\r\n    remaining: Number(itemData.quantity),\r\n\r\n    itemCategory: itemData.itemCategory,\r\n    componentType: itemData.componentType,\r\n    package: itemData.package,\r\n    partNumber: itemData.partNumber,\r\n    manufacturer: itemData.manufacturer,\r\n    value: itemData.value,\r\n    tolerance: itemData.tolerance,\r\n    voltageRating: itemData.voltageRating,\r\n    currentRating: itemData.currentRating,\r\n    displayType: itemData.displayType,\r\n    displayInterface: itemData.displayInterface,\r\n    displayColor: itemData.displayColor,\r\n    protectionType: itemData.protectionType,\r\n    protectionLocation: itemData.protectionLocation,\r\n    moduleType: itemData.moduleType,\r\n  };\r\n\r\n  console.log(\"ðŸŸ¢ ADD ITEM PAYLOAD:\", payload);\r\n\r\n  onAddItem(containerId, slot.slotId, payload);\r\n  \r\n  refresh();\r\n  setShowAddItemModal(false);\r\n  onClose();\r\n\r\n  setToast({\r\n    show: true,\r\n    message: \"Item added successfully!\",\r\n    bg: \"success\",\r\n  });\r\n};\r\n\r\n\r\n  // ================= EDIT ITEM =================\r\nconst openEditModal = (item) => {\r\n  setEditItem({\r\n    ...item,\r\n    itemId: item.itemId,\r\n    name: item.itemName,\r\n    quantity: totalQty(item),\r\n    itemCategory: item.itemCategory, // âœ… Make sure this is included\r\n    componentType: item.componentType,\r\n    package: item.package,\r\n    partNumber: item.partNumber,\r\n    manufacturer: item.manufacturer,\r\n    value: item.value,\r\n    tolerance: item.tolerance,\r\n    voltageRating: item.voltageRating,\r\n    currentRating: item.currentRating,\r\n    displayType: item.displayType,\r\n    displayInterface: item.displayInterface,\r\n    displayColor: item.displayColor,\r\n    protectionType: item.protectionType,\r\n    protectionLocation: item.protectionLocation,\r\n    moduleType: item.moduleType,\r\n  });\r\n  setShowEditModal(true);\r\n};\r\n\r\n  // âœ… CORRECT - Update handleEditSave to accept itemData\r\n  const handleEditSave = async (itemData) => {\r\n    if (!editItem) return;\r\n\r\n    try {\r\n      await api.put(\r\n        `/racks/updateItem/${containerId}/${slot.slotId}/${editItem.itemId}`,\r\n        {\r\n          itemName: itemData.name,           // Use itemData from modal\r\n          total: itemData.quantity,           // Use itemData from modal\r\n\r\n          itemCategory: itemData.itemCategory,\r\n          componentType: itemData.componentType,\r\n          package: itemData.package,\r\n          partNumber: itemData.partNumber,\r\n          manufacturer: itemData.manufacturer,\r\n          value: itemData.value,\r\n          tolerance: itemData.tolerance,\r\n          voltageRating: itemData.voltageRating,\r\n          currentRating: itemData.currentRating,\r\n          displayType: itemData.displayType,\r\n          displayInterface: itemData.displayInterface,\r\n          displayColor: itemData.displayColor,\r\n          protectionType: itemData.protectionType,\r\n          protectionLocation: itemData.protectionLocation,\r\n          moduleType: itemData.moduleType,\r\n        }\r\n      );\r\n\r\n      setToast({\r\n        show: true,\r\n        message: \"Item updated successfully\",\r\n        bg: \"success\",\r\n      });\r\n\r\n      setShowEditModal(false);\r\n      setEditItem(null);\r\n      refresh();\r\n      onClose();\r\n    } catch (err) {\r\n      setToast({\r\n        show: true,\r\n        message: err.response?.data?.message || \"Update failed\",\r\n        bg: \"danger\",\r\n      });\r\n    }\r\n  };\r\n\r\n  // ================= DELETE ITEM =================\r\n  const openDeleteModal = (item) => {\r\n    setDeleteItem(item);\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem) return;\r\n\r\n    try {\r\n      await api.delete(\r\n        `/racks/deleteItem/${containerId}/${slot.slotId}/${deleteItem.itemId}`\r\n      );\r\n\r\n      setToast({\r\n        show: true,\r\n        message: \"Item deleted successfully\",\r\n        bg: \"success\",\r\n      });\r\n\r\n      setShowDeleteModal(false);\r\n      setDeleteItem(null);\r\n      refresh();\r\n      onClose();\r\n    } catch {\r\n      setToast({\r\n        show: true,\r\n        message: \"Failed to delete item\",\r\n        bg: \"danger\",\r\n      });\r\n    }\r\n  };\r\n\r\n  // ================= RETURN ITEM =================\r\n  const openReturnModal = (item) => {\r\n    if (!item.takenHistory?.length) {\r\n      setToast({\r\n        show: true,\r\n        message: \"No borrow history found\",\r\n        bg: \"warning\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setReturnContext({\r\n      item,\r\n      historyList: item.takenHistory,\r\n    });\r\n    setShowReturnModal(true);\r\n  };\r\n\r\n  const confirmReturn = async () => {\r\n    const borrower = returnContext?.historyList.find(\r\n      (h) => h.borrowId === selectedBorrower\r\n    );\r\n\r\n    if (!borrower) {\r\n      setToast({\r\n        show: true,\r\n        message: \"Select borrower\",\r\n        bg: \"warning\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (returnQty < 1 || returnQty > borrower.quantity) {\r\n      setToast({\r\n        show: true,\r\n        message: \"Invalid quantity\",\r\n        bg: \"danger\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await api.post(`/manager/returnItem/${borrower.borrowId}`, {\r\n        rackId: slot.rackId,\r\n        rackName: slot.rackName,\r\n        slotNumber: slot.slotNumber,\r\n        returnQuantity: returnQty,\r\n      });\r\n\r\n      setToast({\r\n        show: true,\r\n        message: \"Item returned successfully\",\r\n        bg: \"success\",\r\n      });\r\n\r\n      refresh();\r\n      setShowReturnModal(false);\r\n      setReturnContext(null);\r\n      setReturnQty(1);\r\n      setSelectedBorrower(\"\");\r\n      onClose();\r\n    } catch {\r\n      setToast({\r\n        show: true,\r\n        message: \"Return failed\",\r\n        bg: \"danger\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <NotificationToast\r\n        show={toast.show}\r\n        message={toast.message}\r\n        bg={toast.bg}\r\n        onClose={() => setToast((p) => ({ ...p, show: false }))}\r\n      />\r\n\r\n      {/* SLOT DETAILS */}\r\n      <Modal show={show} onHide={onClose} centered size=\"lg\">\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>\r\n            Slot {slot.slotNumber} <span className=\"text-muted\">-Details</span>\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body style={{ background: \"#0f172a\", color: \"white\" }}>\r\n          {items.length === 0 && (\r\n            <p className=\"text-muted\">This slot is empty.</p>\r\n          )}\r\n\r\n          {items.map((it) => (\r\n            <div\r\n              key={it.itemId}\r\n              className=\"p-3 mb-3 rounded\"\r\n              style={{ background: \"#111827\", border: \"1px solid #1f2933\" }}\r\n            >\r\n              <div className=\"d-flex justify-content-between\">\r\n                <div>\r\n                  <strong>{it.itemName}</strong>\r\n                  <div className=\"small text-muted\">\r\n                    Total: {totalQty(it)} | Remaining: {remainingQty(it)}\r\n                    {it.itemCategory && ` | ${it.itemCategory}`}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"d-flex gap-2\">\r\n                  <Button size=\"sm\" onClick={() => openEditModal(it)}>\r\n                    Edit\r\n                  </Button>\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"danger\"\r\n                    onClick={() => openDeleteModal(it)}\r\n                  >\r\n                    <Trash2 size={16} />\r\n                  </Button>\r\n                  {remainingQty(it) < totalQty(it) && (\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"warning\"\r\n                      onClick={() => openReturnModal(it)}\r\n                    >\r\n                      Return\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </Modal.Body>\r\n\r\n        <Modal.Footer>\r\n          <Button onClick={() => setShowAddItemModal(true)}>\r\n            + Add Item\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* ADD and edit ITEM */}\r\n      <AddItemModal\r\n        show={showAddItemModal}\r\n        onClose={() => setShowAddItemModal(false)}\r\n        onSubmit={handleAddItemSubmit}\r\n        slotNumber={slot.slotNumber}\r\n        mode=\"add\"\r\n      />\r\n      <AddItemModal\r\n        show={showEditModal}\r\n        onClose={() => setShowEditModal(false)}\r\n        onSubmit={handleEditSave}\r\n        slotNumber={slot.slotNumber}\r\n        mode=\"edit\"\r\n        initialData={editItem}\r\n      />\r\n\r\n\r\n\r\n\r\n      {/* DELETE CONFIRM */}\r\n      <Modal show={showDeleteModal} onHide={() => setShowDeleteModal(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Delete Item</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          Delete <strong>{deleteItem?.itemName}</strong>?\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowDeleteModal(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={handleDeleteItem}>\r\n            Delete\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* RETURN MODAL */}\r\n      <Modal show={showReturnModal} onHide={() => setShowReturnModal(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Return Item</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {returnContext && (\r\n            <>\r\n              <Form.Select\r\n                className=\"mb-3\"\r\n                value={selectedBorrower}\r\n                onChange={(e) => setSelectedBorrower(e.target.value)}\r\n              >\r\n                <option value=\"\">Select borrower</option>\r\n                {returnContext.historyList.map((h) => (\r\n                  <option key={h.borrowId} value={h.borrowId}>\r\n                    {h.userName} ({h.quantity})\r\n                  </option>\r\n                ))}\r\n              </Form.Select>\r\n\r\n              <Form.Control\r\n                type=\"number\"\r\n                min=\"1\"\r\n                value={returnQty}\r\n                onChange={(e) => setReturnQty(Number(e.target.value))}\r\n              />\r\n            </>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowReturnModal(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"success\" onClick={confirmReturn}>\r\n            Confirm\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SlotDetailModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}